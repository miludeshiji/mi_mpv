# 配置参考手册：https://mpv.io/manual/master
#
# ----------

# 文件 File
keep-open=no 					# 播放完毕时自动退出。若不要自动退出则改为「yes」。
loop-playlist=inf 				# 列表播放循环方式，循环写inf否则写no

# 播放 Playback
vo=gpu-next
hwdec=d3d11va 					# 使用硬解。若不要硬解则注释掉即可。
gpu-api=d3d11
gpu-context=d3d11 				# 选择图形输出后端
#d3d11-exclusive-fs=yes 		# 当gpu-api=d3d11时 全屏时独占，默认 no
vd-lavc-dr=yes 					# 是否直接解码到显存
hwdec-codecs=all 				# 尽可能所有格式先尝试硬解

# 缓存设置
cache=yes 						# 开启缓存
demuxer-max-bytes=1024MiB 		# 最大向后缓存大小（KiB或MiB）
cache-on-disk=no 				# 用内存而不是磁盘缓存
#cache-secs=8 					# 缓存时间

# 视频 Video
profile=high-quality
cscale=catmull_rom
deband=yes 						# 色带是非常常见的视频压缩瑕疵。默认启用去色带是利大于弊的
icc-profile-auto=yes 			# 建议将色彩管理开启
dither-depth=10 				# 是否开启色深抖动弥补色彩转换损失。8位显示器写8，10位显示器写10。
vf-append=format=gamma=gamma2.2 # 设置GAMMA修正符合SRGB标准
icc-cache-dir="~~/cache/icc_cache" 	# 存储icc缓存以加速二次启动
gpu-shader-cache-dir="~~/cache/shaders_cache" # 存储着色器缓存以加速二次启动

#vf=vapoursynth="~~/vs/MEMC_RIFE_NV.vpy"
#glsl-shaders="~~/shaders/Anime4K_Clamp_Highlights.glsl;~~/shaders/Anime4K_Restore_CNN_VL.glsl;~~/shaders/Anime4K_Upscale_CNN_x2_VL.glsl;~~/shaders/Anime4K_Restore_CNN_M.glsl;~~/shaders/Anime4K_AutoDownscalePre_x2.glsl;~~/shaders/Anime4K_AutoDownscalePre_x4.glsl;~~/shaders/Anime4K_Upscale_CNN_x2_M.glsl"

# 很多时候，我们的显示器刷新率不是片源帧率的整数倍（例如显示器刷新率通常为 60 Hz 而动画通常为 23.976 fps），此时在默认设置下会因每一帧实际在屏幕上的呈现时间不均等而造成卡顿感（俗称 3:2 pull down judder）。因此，建议启用 interpolation 来消除这个问题（此功能非常类似于 madVR 中的 smooth motion）
video-sync=display-resample
interpolation=yes
tscale=oversample

# 音频 Audio
ao=wasapi 						# 指定音频输出驱动程序
audio-pitch-correction=yes 		# 变速播放时的音调修正
audio-file-auto=fuzzy 			# 加载含有视频文件名的音频文件（fuzzy为模糊名，exact为精确名）
volume-max=200 					# 程序最大音量[100,1000]

# 字幕 Subtitle
slang=zh,chi,chs,sc,zh-hans,en,eng # 指定优先使用字幕轨（DVD使用ISO 639-1两位语言代码，MKV、MPEG-TS使用ISO 639-2 三位语言代码）
sub-auto=fuzzy 					# 加载视频文件的外部字幕文件方式。（fuzzy为模糊名，exact为精确名）
sub-ass-override=yes 			# Override ASS 字幕的 Default 样式。
sub-ass-force-margins=yes 		# 强制外挂ass字幕可使用黑边
sub-border-size=8
sub-blur=1
sub-border-color="#000000"
sub-color="#FFFFFF"
sub-margin-y=40
sub-font=Source Han Sans Medium # 当字幕文件指定的字体不存在（未在系统中安装）时，使用此字体作为 fallback。解决了 PotPlayer 中 fallback 成奇丑无比的中易宋体的问题。个人推荐适合用于视频字幕的字体有：思源黑体、冬青黑体、筑紫黑体等。请将「Source Han Sans Medium」改为您喜好的字体即可。若不想折腾，直接使用「微软雅黑」也可以。
sub-font-size=60
blend-subtitles=video 			# 设置将字幕渲染到视频源分辨率并随视频一起缩放并进行色彩管理

# 外观 Appearance
window-scale=1					# 设置窗口为视频分辨率
#geometry=1280x720 				# 初始窗口大小。
snap-window=yes 				# 贴边吸附（限win）
border=yes						# 边框
osc=no 							# 关闭简易控制面板On Screen Controller(osc)
load-stats-overlay=no 			# 禁用内建stats.lua脚本
osd-bar-w=100 					# osd-bar宽度[1,100],屏幕宽度的百分比
osd-bar-h=0.4 					# osd-bar高度[0.1,50]屏幕高度的百分比
osd-bar-align-y=1 				# 位置[-1,1]x为左到右，y为上到下
osd-level=1
osd-duration=2000
osd-font=Source Han Sans Medium # OSD信息的字体。同样地，请根据个人喜好自行更改。
osd-font-size=36 				# OSD信息字体大小
#osd-align-x=center 			# 居中显示 OSD 信息。（x横向左中右left/center/right,y纵向上中下top/center/buttom）
osd-margin-y=10
osd-border-size=4
osd-border-color="#000000"
osd-color="#7FFFD4" 			# OSD颜色，RGB16进制表示
osd-playing-msg="打开: ${media-title}"
osd-msg2="${media-title}\n${file-format}, ${file-size}\n\n${time-pos/full}/-${time-remaining/full} (${percent-pos}%), 帧 ${estimated-frame-number}/${estimated-frame-count}, 章节 ${chapter}\n\n模式: ${hwdec}\n视频: ${video-codec}, ${width}x${height}, ${estimated-vf-fps}fps, ${video-bitrate}\n音频: ${audio-codec}, ${audio-device}, ${audio-bitrate}\n\n${mpv-version}"
osd-msg3="${time-pos}/-${time-remaining} (${percent-pos}%)"
osd-on-seek=msg 				# Seek 时显示 osd-msg3 而非进度条。
osd-scale-by-window=no 			# OSD随窗口大小缩放（yes/no）

# 截屏 Screenshot
screenshot-format=png 			# 截屏文件格式（可选：png、ppm、pgm、pgmyuv、tga、jpg、jpeg）
screenshot-template="mpv Capture %n - %f_%P" # 截图命名模板
screenshot-directory="C:\Users\miludeshiji\Pictures\Screenshots" # 截屏文件保存路径
screenshot-jpeg-quality=90 		# （0-100） JPEG的质量，默认 90
screenshot-jpeg-source-chroma=yes # 用与源视频相同的色度半采样写入JPEG，默认 yes
screenshot-png-compression=7 	# （0-9） PNG压缩等级，过高的等级影响性能，默认 7
screenshot-png-filter=5 		# （0-5） PNG的压缩过滤器。默认值 5 即可实现最佳压缩率
screenshot-webp-lossless=no 	# 是否使用无损WEBP，默认 no
screenshot-webp-quality=75 		# （0-100） 当 creenshot-webp-lossless=no 时生效有损WEBP的质量，默认 75
screenshot-webp-compression=4 	# （0-6） WEBP压缩等级，使用有损WEBP时进一步降低图片质量，默认 4
screenshot-jxl-distance=1 		# （0-15） JXL的视觉模型距离，0为质量无损，0.1为视觉无损，默认值 1 相当于JPEG的90质量
screenshot-jxl-effort=3 		# （1-9） JXL压缩等级，过高的等级影响性能，默认 3
screenshot-tag-colorspace=no 	# 使用适当的色彩空间标记屏幕截图（并非所有格式受支持）默认 no
screenshot-high-bit-depth=yes 	# 主要影响PNG/JXL，尽可能使用和视频输出时近似的位深，默认 yes

# SVP设置
input-ipc-server=mpvpipe 		# IPC支持
hr-seek-framedrop=no 			# 修复音画同步
no-resume-playback 				# watch later不兼容SVP设置

# 其他设置
no-input-builtin-bindings 		# 禁用默认快捷键方案，builtin与default相比不影响脚本的预设快捷键
log-file="D:\mpv\portable_config\log\mpv.txt" # 输出日志

save-position-on-quit=yes 		# 退出时记住播放状态（包括是否暂停、音量、播放速度、位置等）
watch-later-options=start,vid,aid,sid # 不记录是否暂停（除了pause同理可写fullscreen,mute,speed,ontop等参数）
watch-later-directory="D:\mpv\zhuangtai" # 播放状态保存目录